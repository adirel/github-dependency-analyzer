<project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}" includeantruntime="true">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>		
		<jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>		
		<jar jarfile="${bindist}/applicant-${version}.jar" basedir="${build}" includes="com/extensiblejava/applicant/**"/>
		
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/loan-${version}.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./original/build.xml" target="clean" inheritall="false" />
		<ant antfile="./callback/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./demote/build.xml" target="clean" inheritall="false" />
		<ant antfile="./escalate/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master AcyclicRelationships Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/calc.jar" basedir="${build}" includes="com/kirkk/calc/**"/>
		<jar jarfile="${dist}/mediator.jar" basedir="${build}" includes="com/kirkk/mediator/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/calc.jar"/>
				<pathelement path="${dist}/mediator.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/mediator.jar" basedir="${build}" includes="com/kirkk/mediator/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/mediator.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./nocohesion/build.xml" target="clean" inheritall="false" />
		<ant antfile="./cohesivecyclic/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./cohesiveacyclic/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master CohesiveModules Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="CompDep" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="dist" location="${basedir}/dist"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${dist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${bin}"/>
		<mkdir dir="${dist}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${bin}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<jar jarfile="${dist}/bill.jar" basedir="${bin}" includes="com/extensiblejava/bill/**"/>
		<jar jarfile="${dist}/route.jar" basedir="${bin}" includes="com/extensiblejava/route/**"/>
		<jar jarfile="${dist}/bill-test.jar" basedir="${bin}" includes="com/extensiblejava/test/**"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/route.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/bill-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.RouterTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="CompDep" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="dist" location="${basedir}/dist"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${dist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${bin}"/>
		<mkdir dir="${dist}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${bin}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<jar jarfile="${dist}/bill.jar" basedir="${bin}" includes="com/extensiblejava/bill/**"/>
		<jar jarfile="${dist}/route.jar" basedir="${bin}" includes="com/extensiblejava/route/**"/>
		<jar jarfile="${dist}/bill-test.jar" basedir="${bin}" includes="com/extensiblejava/test/**"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/route.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/bill-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.RouterTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="CompDep" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="dist" location="${basedir}/dist"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${dist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${bin}"/>
		<mkdir dir="${dist}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${bin}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<jar jarfile="${dist}/bill.jar" basedir="${bin}" excludes="com/extensiblejava/test/**"/>
		<jar jarfile="${dist}/bill-test.jar" basedir="${bin}" includes="com/extensiblejava/test/**"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/bill-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.RouterTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/facade"/>
		<mkdir dir="${bindist}/com/extensiblejava/calculator/test"/>
		<copy file="${javasrc}/com/extensiblejava/facade/AppContext.xml" todir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${testsrc}/com/extensiblejava/calculator/test/TestContext.xml" todir="${build}/com/extensiblejava/calculator/test"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/**"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/test/**"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/loanfacade-${version}.jar" basedir="${build}" includes="com/extensiblejava/facade/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/client/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="springosgilib" location="${basedir}/springosgilib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
		<pathelement path="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
		<pathelement path="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
		<pathelement path="${springosgilib}/org.eclipse.osgi_3.6.0.v20100517.jar"/>
		<!-- <pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/> -->
		<!-- <pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/> -->
		<!-- <pathelement path="${springosgilib}/org.springframework.aop-2.5.6.SEC01.jar"/> -->
		<!-- <pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/> -->
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<!-- <mkdir dir="${bindist}/com/extensiblejava/facade"/>
		<mkdir dir="${bindist}/com/extensiblejava/calculator/test"/> -->
		<!-- <copy file="${javasrc}/com/extensiblejava/facade/AppContext.xml" todir="${bindist}/com/extensiblejava/facade"/> -->
		<copy file="${javasrc}/com/extensiblejava/facade/META-INF/spring/loanfacade.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/facade/META-INF/spring/loanfacade-osgi.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/dumbclient/META-INF/spring/loanclient.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/dumbclient/META-INF/spring/loanclient-osgi.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/calculator/META-INF/spring/calculator.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/calculator/META-INF/spring/calculator-osgi.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/loan/impl/META-INF/spring/loan.xml" todir="${build}/META-INF/spring"/>
		<copy file="${javasrc}/com/extensiblejava/loan/impl/META-INF/spring/loan-osgi.xml" todir="${build}/META-INF/spring"/>
		
		<copy file="${testsrc}/com/extensiblejava/calculator/test/TestContext.xml" todir="${build}/com/extensiblejava/calculator/test"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		
		<jar jarfile="${bindist}/loggerconfig.jar" basedir="${javasrc}" includes = "log4j.properties" manifest="${javasrc}/META-INF/Manifest.mf"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/** META-INF/spring/loan.xml META-INF/spring/loan-osgi.xml" manifest="${javasrc}/com/extensiblejava/loan/impl/META-INF/Manifest.mf"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/loan/factory/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/dumbclient/** com/extensiblejava/test/** META-INF/spring/**" manifest="${javasrc}/com/extensiblejava/loan/META-INF/Manifest.mf"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/** META-INF/spring/calculator.xml META-INF/spring/calculator-osgi.xml" excludes="com/extensiblejava/calculator/test/**" manifest="${javasrc}/com/extensiblejava/calculator/META-INF/Manifest.mf"/>
		<jar jarfile="${bindist}/loanfacade-${version}.jar" basedir="${build}" includes="com/extensiblejava/facade/** META-INF/spring/loanfacade.xml META-INF/spring/loanfacade-osgi.xml" manifest="${javasrc}/com/extensiblejava/facade/META-INF/Manifest.mf"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/client/**"/>
		<jar jarfile="${bindist}/dclient-${version}.jar" basedir="${build}" includes="com/extensiblejava/dumbclient/** META-INF/spring/loanclient.xml META-INF/spring/loanclient-osgi.xml" manifest="${javasrc}/com/extensiblejava/dumbclient/META-INF/Manifest.mf"/>
		 
		<!-- <delete dir="${build}"/> -->
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property environment="env"/>
	<property name="groovy.src" location="${basedir}/src"/>
	<property name="groovy.build" location="${basedir}/build"/>
	<property name="groovy.bin" location="${basedir}/bin"/>
	<property name="groovy.dir" location="${env.GROOVY_HOME}"/>
	<property name="groovy.library.jar" location="${groovy.dir}/lib/groovy-1.7.6.jar"/>
	<property name="java.bin" location="${basedir}/../bin"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<echo message="groovy.dir = ${groovy.dir}"/>
	<echo message="groovy.bin = ${groovy.bin}"/>
	<echo message="groovy.src = ${groovy.src}"/>
	<echo message="groovy lib jar = ${groovy.library.jar}"/>
	<echo message="java.bin = ${java.bin}"/>
	
	<path id="project.class.path">
		<pathelement path="${groovy.src}"/>
		<pathelement path="${java.bin}/loan-intrfc-1.0.jar"/>
		<pathelement path="${java.bin}/loan-impl-1.0.jar"/>
		<pathelement path="${groovy.library.jar}"/>
		<pathelement path="${groovy.dir}/lib/asm-3.2.jar"/>
		<pathelement path="${groovy.dir}/lib/antlr-2.7.7.jar"/>
		<!-- <pathelement path="${lib}/junit.jar"/> -->
	</path>
	
	<path id="groovy.class.path">
		<pathelement path="${groovy.library.jar}"/>
		<pathelement path="${groovy.dir}/lib/commons-cli-1.2.jar"/>
		<pathelement path="${groovy.dir}/lib/asm-3.2.jar"/>
		<pathelement path="${groovy.dir}/lib/antlr-2.7.7.jar"/>
	</path>
	
	<taskdef name="groovyc" classname="org.codehaus.groovy.ant.Groovyc" classpathref="groovy.class.path"/>
	
	<target name="clean" description="clean up">
		<delete dir="${groovy.bin}"/>
		<delete dir="${groovy.build}"/>
		<delete dir="${buildstats}"/>
		<!-- <delete file="junitresults.txt"/> -->
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${groovy.build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<groovyc srcdir="${groovy.src}" destdir="${groovy.build}">
			<classpath refid="project.class.path"/>
		</groovyc>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${groovy.bin}"/>
		
		<copy file="${groovy.src}/com/extensiblejava/calculator/groovy/META-INF/spring/calculator.xml" todir="${groovy.build}/META-INF/spring"/>
		<copy file="${groovy.src}/com/extensiblejava/calculator/groovy/META-INF/spring/calculator-osgi.xml" todir="${groovy.build}/META-INF/spring"/>
		<copy file="${basedir}/run.sh" todir="${groovy.bin}"/>
		
		<!-- <jar jarfile="${bindist}/loggerconfig.jar" basedir="${javasrc}" includes = "log4j.properties" manifest="${javasrc}/META-INF/Manifest.mf"/> -->
		
		<jar jarfile="${groovy.bin}/calc-impl-groovy-${version}.jar" basedir="${groovy.build}" includes = "com/extensiblejava/calculator/groovy/** META-INF/spring/calculator.xml META-INF/spring/calculator-osgi.xml" manifest="${groovy.src}/com/extensiblejava/calculator/groovy/META-INF/Manifest.mf"/>
		
		<!-- <jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/loan/factory/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/dumbclient/** com/extensiblejava/test/** META-INF/spring/**" manifest="${javasrc}/com/extensiblejava/loan/META-INF/Manifest.mf"/>
		 
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit> -->
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property environment="env"/>
	<property name="scala.src" location="${basedir}/src"/>
	<property name="scala.build" location="${basedir}/build"/>
	<property name="scala.bin" location="${basedir}/bin"/>
	<property name="scala.dir" location="${env.SCALA_HOME}"/>
	<property name="scala.library.jar" location="${scala.dir}/lib/scala-library.jar"/>
	<property name="scala.compiler.jar" location="${scala.dir}/lib/scala-compiler.jar"/>
	<property name="java.bin" location="${basedir}/../bin"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<echo message="scala.home = ${env.SCALA_HOME}"/>
	<echo message="scala.dir = ${scala.dir}"/>
	<echo message="scala.bin = ${scala.bin}"/>
	<echo message="scala.src = ${scala.src}"/>
	<echo message="java.bin = ${java.bin}"/>
	
	<path id="project.class.path">
		<pathelement path="${scala.src}"/>
		<pathelement path="${java.bin}/loan-intrfc-1.0.jar"/>
		<pathelement path="${java.bin}/loan-impl-1.0.jar"/>
		<pathelement path="${scala.library.jar}"/>
		<!-- <pathelement path="${lib}/junit.jar"/> -->
	</path>
	
	<path id="scala.class.path">
		<pathelement path="${scala.library.jar}"/>
		<pathelement path="${scala.compiler.jar}"/>
	</path>
	
	<taskdef resource="scala/tools/ant/antlib.xml" classpathref="scala.class.path"/>
	
	<target name="clean" description="clean up">
		<delete dir="${scala.bin}"/>
		<delete dir="${scala.build}"/>
		<delete dir="${buildstats}"/>
		<!-- <delete file="junitresults.txt"/> -->
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${scala.build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<scalac srcdir="${scala.src}" destdir="${scala.build}">
			<classpath refid="project.class.path"/>
		</scalac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${scala.bin}"/>
		
		<copy file="${scala.src}/com/extensiblejava/calculator/scala/META-INF/spring/calculator.xml" todir="${scala.build}/META-INF/spring"/>
		<copy file="${scala.src}/com/extensiblejava/calculator/scala/META-INF/spring/calculator-osgi.xml" todir="${scala.build}/META-INF/spring"/>
		<copy file="${basedir}/run.sh" todir="${scala.bin}"/>
		
		<!-- <jar jarfile="${bindist}/loggerconfig.jar" basedir="${javasrc}" includes = "log4j.properties" manifest="${javasrc}/META-INF/Manifest.mf"/> -->
		
		<jar jarfile="${scala.bin}/calc-impl-scala-${version}.jar" basedir="${scala.build}" includes = "com/extensiblejava/calculator/scala/** META-INF/spring/calculator.xml META-INF/spring/calculator-osgi.xml" manifest="${scala.src}/com/extensiblejava/calculator/scala/META-INF/Manifest.mf"/>
		
		<!-- <jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/loan/factory/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/dumbclient/** com/extensiblejava/test/** META-INF/spring/**" manifest="${javasrc}/com/extensiblejava/loan/META-INF/Manifest.mf"/>
		 
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit> -->
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><!-- Builds both client and service. Projects can also be built indpendently using the build files in each project's directory. -->
<project name="OSGi Hello World" default="usage" basedir=".">
	<target name="build.all">
		<ant antfile="./service/build.xml" inheritall="false"/>
		<ant antfile="./client/build.xml" inheritall="false" />
	</target>
	
	<target name="clean.all">
		<ant antfile="./service/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./client/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master HelloWorld OSGi Build Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="Among the available targets are:"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the service and client project directories"/>
		<echo message="  build.all    --> Build the service and client projects."/>
		<echo message=""/>
		<echo message="To run individual builds:"/>
		<echo message=""/>
		<echo message="  Service -> run the build.xml in the service project directory"/>
		<echo message="  Client  -> run the build.xml in the client project directory"/>
		<echo message=""/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="OSGi Hello World Client" default="dist.client" basedir=".">

	<property name="client.src" location="${basedir}/src"/>
	<property name="client.build" location="${basedir}/build"/>
	<property name="equinox.lib" location="${basedir}/../equinox"/>
	<property name="service.lib" location="${basedir}/../service/bin"/>
	<property name="bin" location="${basedir}/bin"/>
	
	<property name="version" value="1.0"/>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${lib}"/>
		<delete dir="${client.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${client.build}"/>
		<mkdir dir="${bin}"/>
	</target>
	
	
	<target name="compile.client" depends="init">
		<javac srcdir="${client.src}" destdir="${client.build}">
			<classpath>
				<pathelement path="${client.src}"/>
				<pathelement location="${equinox.lib}/org.eclipse.osgi_3.6.0.v20100517.jar"/>
				<pathelement location="${service.lib}/service.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.client" depends="compile.client">
		<jar jarfile="${bin}/client.jar" basedir="${client.build}" manifest="${basedir}/META-INF/Manifest.mf"/>
	</target>
	
</project><project name="OSGi Hello World Service" default="dist.service" basedir=".">

	<property name="service.src" location="${basedir}/src"/>
	<property name="service.build" location="${basedir}/build"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="equinox.lib" location="${basedir}/../equinox"/>
	<property name="version" value="1.0"/>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${service.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${service.build}"/>
		<mkdir dir="${bin}"/>
	</target>
	
	<target name="compile.service" depends="init">
		<javac srcdir="${service.src}" destdir="${service.build}">
			<classpath>
				<pathelement path="${service.src}"/>
				<pathelement location="${equinox.lib}/org.eclipse.osgi_3.6.0.v20100517.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.service" depends="compile.service">
		<jar jarfile="${bin}/service.jar" basedir="${service.build}" manifest="${basedir}/META-INF/Manifest.mf"/>
	</target>
		
</project><!-- Builds both client and service. Projects can also be built indpendently using the build files in each project's directory. -->
<project name="OSGi Hello World Spring" default="usage" basedir=".">
	<target name="build.all">
		<ant antfile="./service/build.xml" inheritall="false"/>
		<ant antfile="./client/build.xml" inheritall="false" />
	</target>
	
	<target name="clean.all">
		<ant antfile="./service/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./client/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master HelloWorldSpring OSGi Build Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="Among the available targets are:"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the spec, service, service2, and client project directories"/>
		<echo message="  build.all    --> Build the spec, service, service2, and client projects."/>
		<echo message=""/>
		<echo message="To run individual builds:"/>
		<echo message=""/>
		<echo message="  Service  -> run the build.xml in the service project directory"/>
		<echo message="  Client   -> run the build.xml in the client project directory"/>
		<echo message=""/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="OSGi Hello World Spring Client" default="dist.client" basedir=".">

	<property name="client.src" location="${basedir}/src"/>
	<property name="client.build" location="${basedir}/build"/>
	<property name="service.lib" location="${basedir}/../service/bin"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${client.src}"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${client.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${client.build}"/>
		<mkdir dir="${bin}"/>
	</target>

	<target name="compile.client" depends="init">
		<javac srcdir="${client.src}" destdir="${client.build}">
			<classpath>
				<pathelement path="${client.src}"/>
				<pathelement location="${service.lib}/service.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.client" depends="compile.client">
		<jar jarfile="${bin}/client.jar" basedir="${client.build}" manifest="${basedir}/META-INF/Manifest.mf">
			<fileset dir="${basedir}" excludes="build/** src/** build.xml"/>
		</jar>
	</target>

</project><project name="OSGi Hello World Spring Service" default="dist.service" basedir=".">

	<property name="service.src" location="${basedir}/src"/>
	<property name="service.build" location="${basedir}/build"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${service.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${service.build}"/>
		<mkdir dir="${bin}"/>
	</target>
	
	<target name="compile.service" depends="init">
		<javac srcdir="${service.src}" destdir="${service.build}">
			<classpath>
				<pathelement path="${service.src}"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.service" depends="compile.service">
			<jar jarfile="${bin}/service.jar" basedir="${service.build}" manifest="${basedir}/META-INF/Manifest.mf">
				<fileset dir="${basedir}" excludes="build/** src/** build.xml"/>
			</jar>
	</target>
		
</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/customerservice/src"/>
	<property name="testsrc" location="${basedir}/customerservicetest"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="springosgilib" location="${basedir}/springlib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath>
				<pathelement location="${lib}"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>	
				<pathelement location="${lib}/junit.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/customer/test/customer.xml" todir="${build}/com/extensiblejava/customer/test"/>
		<jar jarfile="${bindist}/customer.jar" basedir="${build}" excludes="com/extensiblejava/**/test/**">
			<fileset dir="${basedir}/customerservice" excludes="src/**"/>
		</jar>
		<jar jarfile="${bindist}/customer-test.jar" basedir="${build}" includes="com/extensiblejava/**/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/customer.jar"/>
				<pathelement path="${bindist}/customer-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/customerextension/src"/>
	<property name="testsrc" location="${basedir}/customerextensiontest"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/../lib"/>
	<property name="springlib" location="${basedir}/../springlib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="customer.lib" location="${basedir}/../bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath>
				<pathelement location="${lib}"/>
				<pathelement location="${springlib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springlib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springlib}/org.springframework.core-2.5.6.SEC01.jar"/>	
				<pathelement location="${customer.lib}/customer.jar"/>
				<pathelement location="${lib}/junit.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/customer/test/customer.xml" todir="${build}/com/extensiblejava/customer/test"/>
		<jar jarfile="${bindist}/better-calc.jar" basedir="${build}" excludes="com/extensiblejava/customer/****">
			<!-- <fileset dir="${basedir}/customerservice" excludes="src/**"/> -->
		</jar>
		<jar jarfile="${bindist}/customer-ext-test.jar" basedir="${build}" includes="com/extensiblejava/customer/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${customer.lib}/customer.jar"/>
				<pathelement path="${bindist}/better-calc.jar"/>
				<pathelement path="${bindist}/customer-ext-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement location="${springlib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springlib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springlib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springlib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springlib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springlib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springlib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerExtensionTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/customerservice/src"/>
	<property name="testsrc" location="${basedir}/customerservicetest"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="springosgilib" location="${basedir}/springosgilib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="calclib" location="${basedir}/customercalculator/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath>
				<pathelement location="${lib}"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>	
				<pathelement location="${calclib}/default-calc.jar"/>	
				<pathelement location="${lib}/junit.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/customer/test/customer.xml" todir="${build}/com/extensiblejava/customer/test"/>
		<jar jarfile="${bindist}/customer.jar" basedir="${build}" excludes="com/extensiblejava/**/test/**"  manifest="${basedir}/customerservice/META-INF/Manifest.mf">
			<fileset dir="${basedir}/customerservice" excludes="src/**"/>
		</jar>
		<jar jarfile="${bindist}/customer-test.jar" basedir="${build}" includes="com/extensiblejava/**/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/customer.jar"/>
				<pathelement path="${bindist}/customer-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement location="${calclib}/default-calc.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="OSGi Hello World Spring Client" default="dist.client" basedir=".">

	<property name="client.src" location="${basedir}/src"/>
	<property name="client.build" location="${basedir}/build"/>
	<property name="customer.lib" location="${basedir}/../bin"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${client.src}"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${client.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${client.build}"/>
		<mkdir dir="${bin}"/>
	</target>

	<target name="compile.client" depends="init">
		<javac srcdir="${client.src}" destdir="${client.build}">
			<classpath>
				<pathelement path="${client.src}"/>
				<pathelement location="${customer.lib}/customer.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.client" depends="compile.client">
		<jar jarfile="${bin}/client.jar" basedir="${client.build}" manifest="${basedir}/META-INF/Manifest.mf">
			<fileset dir="${basedir}" excludes="build/** src/** build.xml"/>
		</jar>
	</target>

</project><project name="HelloWorld" default="test" basedir=".">

  <!-- set global properties for this build -->
  <property name="src" location="./src"/>
  <property name="lib" location="./lib"/>
  <property name="test" location="./test"/>
  <property name="build" location="./build"/>
  <property name="dist" location="./dist"/>

  <target name="clean"
          description="clean up" >
      <!-- Delete the ${build} and ${dist} directory trees -->
      <delete dir="${build}"/>
      <delete dir="${dist}"/>
	  <delete file="junitresults.txt"/>
  </target>
  
  <target name="init" depends="clean">
    <!-- Create the time stamp -->
    <mkdir dir="${build}"/>
    <mkdir dir="${dist}"/>
    <copy file="${basedir}/Resource.properties" todir="${dist}/com/extensiblejava/main"/>
  </target>

  <target name="compile" depends="init"
        description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}:${test}" destdir="${build}">
		<classpath>
			<pathelement location="${lib}"/>
			<!-- ><pathelement location="${lib}/spring-core.jar"/>
			<pathelement location="${lib}/spring-context.jar"/>
			<pathelement location="${lib}/spring-beans.jar"/> -->
			
			<pathelement location="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
			<pathelement location="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
			<pathelement location="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
			<!-- ><pathelement location="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/> -->
			<pathelement location="${lib}/log4j-1.2.13.jar"/>
			<pathelement location="${lib}/commons-collections.jar"/>
			<pathelement location="${lib}/commons-logging.jar"/>
			<pathelement location="${lib}/xml-apis.jar"/>
			<pathelement location="${lib}/junit.jar"/>
		</classpath>
    </javac>
  </target>

  <target name="dist" depends="compile"
        description="generate the distribution" >
    <copy file="${src}/com/extensiblejava/main/AppContext.xml" todir="${build}/com/extensiblejava/main"/>
    <!-- <copy file="${src}/com/extensiblejava/main/Resource.properties" todir="${build}/com/extensiblejava/main"/> -->
    <copy file="${test}/com/extensiblejava/main/test/TestContext.xml" todir="${build}/com/extensiblejava/main/test"/>
    <!-- Put everything in ${build} into the MyProject-${DSTAMP}.jar file -->
    <jar jarfile="${dist}/Reuse.jar" basedir="${build}" excludes="com/extensiblejava/main/test/**"/>
    <jar jarfile="${dist}/TestReuse.jar" basedir="${build}" includes="com/extensiblejava/main/test/**"/>
  </target>
  
  <target name="test" depends="dist">
	  <junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement location="${dist}"/>
				<pathelement path="${dist}/Reuse.jar"/>
				<pathelement path="${dist}/TestReuse.jar"/>
				<pathelement path="${lib}/junit.jar"/>
				<!-- ><pathelement location="${lib}/spring-core.jar"/>
				<pathelement location="${lib}/spring-context.jar"/>
				<pathelement location="${lib}/spring-beans.jar"/> -->
				<pathelement location="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement location="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement location="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.main.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
  </target>

</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/someclient"/>
		<copy file="${javasrc}/com/extensiblejava/someclient/AppContext.xml" todir="${bindist}/com/extensiblejava/someclient"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/applicant/test/TestContext.xml" todir="${build}/com/extensiblejava/applicant/test"/>
		<jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/loan-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/** com/extensiblejava/applicant/test/** com/extensiblejava/test/**"/>
		<jar jarfile="${bindist}/applicant-${version}.jar" basedir="${build}" includes="com/extensiblejava/applicant/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/someclient/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-${version}.jar"/>
				<pathelement path="${bindist}/loan-test-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<!-- <delete file="${bindist}/loan-test-${version}.jar"/> -->
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./dependent/build.xml" target="clean" inheritall="false" />
		<ant antfile="./independent/build.xml" target="clean" inheritall="false"/>
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master LevelizedBuild Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="CompDep" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/employee.jar" basedir="${build}" excludes="com/extensiblejava/test/** com/extensiblejava/payroll/**"/>
		<jar jarfile="${bindist}/emp-test.jar" basedir="${build}" includes="com/extensiblejava/test/**"/>
		<jar jarfile="${bindist}/payroll.jar" basedir="${build}" includes="com/extensiblejava/payroll/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement path="${bindist}/employee.jar"/>
				<pathelement path="${bindist}/payroll.jar"/>
				<pathelement path="${bindist}/emp-test.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.EmployeeTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="CompDep" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/employee.jar" basedir="${build}" excludes="com/extensiblejava/facade/** com/extensiblejava/test/** com/extensiblejava/payroll/**"/>
		<jar jarfile="${bindist}/emp-test.jar" basedir="${build}" includes="com/extensiblejava/test/**"/>
		<jar jarfile="${bindist}/payroll.jar" basedir="${build}" includes="com/extensiblejava/payroll/**"/>
		<jar jarfile="${bindist}/payfacade.jar" basedir="${build}" includes="com/extensiblejava/facade/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement path="${bindist}/employee.jar"/>
				<pathelement path="${bindist}/payroll.jar"/>
				<pathelement path="${bindist}/emp-test.jar"/>
				<pathelement path="${bindist}/payfacade.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.EmployeeTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfonsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./full/build.xml" target="clean" inheritall="false" />
		<ant antfile="./level/build.xml" target="clean" inheritall="false"/>
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master LevelizedBuild Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="buildsrc" location="${basedir}/buildsrc"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildsrc}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="basecompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="billcompile" depends="basecompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/bill/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="custcompile" depends="billcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="testcompile" depends="custcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/test/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="analyzer" depends="testcompile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="buildsrc" location="${basedir}/buildsrc"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildsrc}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="basecompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="billcompile" depends="basecompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/bill/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="custcompile" depends="billcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="testcompile" depends="custcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/test/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="analyzer" depends="testcompile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./eliminated/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./inverted/build.xml" target="clean" inheritall="false" />
		<ant antfile="./original/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master ManageRelationships Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="buildsrc" location="${basedir}/buildsrc"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildsrc}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="basecompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="billcompile" depends="basecompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/bill/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="custcompile" depends="billcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="testcompile" depends="custcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/test/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="analyzer" depends="testcompile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="/Applications/Graphviz.app/Contents/MacOS/dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${src}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="compile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${javasrc}/com/extensiblejava/facade/AppContext.xml" todir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/**"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/test/**"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/loanfacade-${version}.jar" basedir="${build}" includes="com/extensiblejava/facade/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/client/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./reuse/build.xml" target="clean" inheritall="false" />
		<ant antfile="./noreuse/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./cohesiveacyclic/build.xml" target="clean" inheritall="false" />
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master ModuleReuse Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Policy" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
		<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/policy.jar" basedir="${build}" excludes="com/extensiblejava/policy/test/**"/>
		<jar jarfile="${bindist}/policy-test.jar" basedir="${build}" includes="com/extensiblejava/policy/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/policy.jar"/>
				<pathelement path="${bindist}/policy-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.policy.test.PolicyXMLTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Policy" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
		<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/policy.jar" basedir="${build}" includes="com/extensiblejava/policy/**" excludes="com/extensiblejava/policy/test/**"/>
		<jar jarfile="${bindist}/policyxml.jar" basedir="${build}" includes="com/extensiblejava/builder/xml/**"/>
		<jar jarfile="${bindist}/policy-test.jar" basedir="${build}" includes="com/extensiblejava/policy/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/policy.jar"/>
				<pathelement path="${bindist}/policyxml.jar"/>
				<pathelement path="${bindist}/policy-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.policy.test.PolicyXMLTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<ant antfile="./layered/build.xml" target="clean" inheritall="false" />
		<ant antfile="./notlayered/build.xml" target="clean" inheritall="false"/>
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master LevelizedBuild Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Proof" default="analyzer" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="weblib" location="${basedir}/WEB-INF/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement location="${lib}/junit.jar"/>
		<pathelement location="${weblib}/struts.jar"/>
		<pathelement location="${weblib}/servlet-api.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${bindist}"/>
		<copy todir="${bindist}">
			<fileset dir="${weblib}">
				<include name="struts.jar"/>
			</fileset>
		</copy>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<!-- <jar jarfile="${bindist}/bill.jar" basedir="${build}" includes="com/extensiblejava/bill/**" excludes="com/extensiblejava/bill/test/**"/>
		<jar jarfile="${bindist}/route.jar" basedir="${build}" includes="com/extensiblejava/route/**"/>
		<jar jarfile="${bindist}/audit.jar" basedir="${build}" includes="com/extensiblejava/audit/**"/> -->
		<jar jarfile="${bindist}/bill.jar" basedir="${build}" includes="com/extensiblejava/bill/** com/extensiblejava/audit/** com/extensiblejava/financial/**"/>
		<jar jarfile="${bindist}/ui.jar" basedir="${build}" includes="com/extensiblejava/ui/**"/>
		<jar jarfile="${bindist}/test.jar" basedir="${build}" includes="com/extensiblejava/bill/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${build}"/>
				<pathelement path="${bindist}/test.jar"/>
				<pathelement path="${bindist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.bill.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="bundle" depends="dist">
		<mkdir dir="${deploy}"/>
		<war destfile="${deploy}/billpay.war" webxml="WEB-INF/web.xml">
  			<fileset dir="jsp"/>
  			<webinf dir="WEB-INF">
  				<exclude name="web.xml"/>
  				<exclude name="${weblib}/servlet-api.jar"/>
  			</webinf>
  			<lib dir="${bindist}" excludes="test.jar"/>
  			<classes dir="${build}" includes="com/extensiblejava/ui/**"/>  			
   		</war>
	</target>
	
	<target name="analyzer" depends="bundle">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Proof" default="analyzer" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="weblib" location="${basedir}/WEB-INF/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement location="${lib}/junit.jar"/>
		<pathelement location="${weblib}/struts.jar"/>
		<pathelement location="${weblib}/servlet-api.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${bindist}"/>
		<copy todir="${bindist}">
			<fileset dir="${weblib}">
				<include name="struts.jar"/>
			</fileset>
		</copy>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<!-- <jar jarfile="${bindist}/bill.jar" basedir="${build}" includes="com/extensiblejava/bill/**" excludes="com/extensiblejava/bill/test/**"/>
		<jar jarfile="${bindist}/route.jar" basedir="${build}" includes="com/extensiblejava/route/**"/>
		<jar jarfile="${bindist}/audit.jar" basedir="${build}" includes="com/extensiblejava/audit/**"/> -->
		<jar jarfile="${bindist}/bill.jar" basedir="${build}" includes="com/extensiblejava/bill/** com/extensiblejava/audit/** com/extensiblejava/financial/**"/>
		<jar jarfile="${bindist}/ui.jar" basedir="${build}" includes="com/extensiblejava/ui/**"/>
		<jar jarfile="${bindist}/test.jar" basedir="${build}" includes="com/extensiblejava/bill/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${build}"/>
				<pathelement path="${bindist}/test.jar"/>
				<pathelement path="${bindist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.bill.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="bundle" depends="dist">
		<mkdir dir="${deploy}"/>
		<war destfile="${deploy}/billpay.war" webxml="WEB-INF/web.xml">
  			<fileset dir="jsp"/>
  			<webinf dir="WEB-INF">
  				<exclude name="web.xml"/>
  				<exclude name="${weblib}/servlet-api.jar"/>
  			</webinf>
  			<lib dir="${bindist}" excludes="test.jar"/>
  			<classes dir="${build}" includes="com/extensiblejava/ui/**"/>  			
   		</war>
	</target>
	
	<target name="analyzer" depends="bundle">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/customerservice/src"/>
	<property name="testsrc" location="${basedir}/customerservicetest"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="springosgilib" location="${basedir}/springosgilib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath>
				<pathelement location="${lib}"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${lib}/junit.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/customer/test/customer.xml" todir="${build}/com/extensiblejava/customer/test"/>
		<jar jarfile="${bindist}/customer.jar" basedir="${build}" excludes="com/extensiblejava/**/test/**"  manifest="${basedir}/customerservice/META-INF/Manifest.mf">
			<fileset dir="${basedir}/customerservice" excludes="src/**"/>
		</jar>
		<jar jarfile="${bindist}/customer-test.jar" basedir="${build}" includes="com/extensiblejava/**/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/customer.jar"/>
				<pathelement path="${bindist}/customer-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
				<pathelement location="${springosgilib}/org.springframework.beans-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/org.springframework.context-2.5.6.SEC01.jar"/> 
				<pathelement location="${springosgilib}/org.springframework.core-2.5.6.SEC01.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar"/> 
				<pathelement location="${springosgilib}/com.springsource.slf4j.api-1.5.0.jar"/>
				<pathelement location="${springosgilib}/com.springsource.slf4j.log4j-1.5.0.jar"/>
				<pathelement location="${springosgilib}/log4j.osgi-1.2.15-SNAPSHOT.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="OSGi Hello World Spring Client" default="dist.client" basedir=".">

	<property name="client.src" location="${basedir}/src"/>
	<property name="client.build" location="${basedir}/build"/>
	<property name="customerservice.lib" location="${basedir}/../bin"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${client.src}"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${client.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${client.build}"/>
		<mkdir dir="${bin}"/>
	</target>

	<target name="compile.client" depends="init">
		<javac srcdir="${client.src}" destdir="${client.build}">
			<classpath>
				<pathelement path="${client.src}"/>
				<pathelement location="${customerservice.lib}/customer.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.client" depends="compile.client">
		<jar jarfile="${bin}/client.jar" basedir="${client.build}" manifest="${basedir}/META-INF/Manifest.mf">
			<fileset dir="${basedir}" excludes="build/** src/** build.xml"/>
		</jar>
	</target>

</project><project name="OSGi Hello World Spring Client" default="dist.client" basedir=".">

	<property name="client.src" location="${basedir}/src"/>
	<property name="client.build" location="${basedir}/build"/>
	<property name="customerservice.lib" location="${basedir}/../bin"/>
	<property name="bin" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${client.src}"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bin}"/>
		<delete dir="${client.build}"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${client.build}"/>
		<mkdir dir="${bin}"/>
	</target>

	<target name="compile.client" depends="init">
		<javac srcdir="${client.src}" destdir="${client.build}">
			<classpath>
				<pathelement path="${client.src}"/>
				<pathelement location="${customerservice.lib}/customer.jar"/>
			</classpath>
		</javac>
	</target>
	
	<target name="dist.client" depends="compile.client">
		<jar jarfile="${bin}/client3.jar" basedir="${client.build}" manifest="${basedir}/META-INF/Manifest.mf">
			<fileset dir="${basedir}" excludes="build/** src/** build.xml"/>
		</jar>
	</target>

</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/customer.jar" basedir="${build}" excludes="com/extensiblejava/**/test/**"/>
		<jar jarfile="${bindist}/customer-test.jar" basedir="${build}" includes="com/extensiblejava/**/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/customer.jar"/>
				<pathelement path="${bindist}/customer-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Customer" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src"/>
	<property name="testsrc" location="${basedir}/test"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<jar jarfile="${bindist}/customer.jar" basedir="${build}" excludes="com/extensiblejava/**/test/**"/>
		<jar jarfile="${bindist}/customer-test.jar" basedir="${build}" includes="com/extensiblejava/**/test/**"/>
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/customer.jar"/>
				<pathelement path="${bindist}/customer-test.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.customer.test.CustomerTest" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/someclient"/>
		<copy file="${javasrc}/com/extensiblejava/someclient/AppContext.xml" todir="${bindist}/com/extensiblejava/someclient"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		<copy file="${testsrc}/com/extensiblejava/applicant/test/TestContext.xml" todir="${build}/com/extensiblejava/applicant/test"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/**"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/applicant/** com/extensiblejava/someclient/** com/extensiblejava/test/**"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/applicant-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/applicant/test/**"/>
		<jar jarfile="${bindist}/alltests-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/test/**" excludes = "com/extensiblejava/applicant/test/** com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/applicant-${version}.jar" basedir="${build}" includes="com/extensiblejava/applicant/**" excludes="com/extensiblejava/applicant/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/someclient/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${bindist}/applicant-test-${version}.jar"/>
				<pathelement path="${bindist}/alltests-test-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="clean.all" basedir=".">

	<property name="build" location="${basedir}/build"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	
	<target name="clean.all">
		<echo message="------------- CLEAN SCRIPT ONLY! CLEANING SUB-DIRECTORIES... ------------- "/>
		<ant antfile="./dependent/build.xml" target="clean" inheritall="false" />
		<ant antfile="./independent/build.xml" target="clean" inheritall="false"/>
		<ant antfile="./dependenteliminated/build.xml" target="clean" inheritall="false" />
		<ant antfile="./independenteliminated/build.xml" target="clean" inheritall="false" />
		<echo message="------- TO BUILD PROJECT, RUN BUILD SCRIPT FROM PROJECT DIRECTORY! ------- "/>
	</target>
	
	<target name="usage">
	
		<echo message=""/>
		<echo message="Master CohesiveModules Clean Script"/>
		<echo message="-----------------------------------------"/>
		<echo message=""/>
		<echo message="  clean.all    --> Clean the project sub-directories and files created by build script."/>
		<echo message="-----------------------------------------"/>
	
	</target>
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${javasrc}/com/extensiblejava/facade/AppContext.xml" todir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/**"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/test/**"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/loanfacade-${version}.jar" basedir="${build}" includes="com/extensiblejava/facade/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/client/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="buildsrc" location="${basedir}/buildsrc"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildsrc}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<!-- <target name="basecompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target> -->
	
	<!-- if building base.jar, depends must be on basecompile, not init -->
	<target name="billcompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/bill/**"/>
				<!-- remove following include to create base.jar module -->
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<!-- exclude these packages to create separate base.jar module -->
				<!-- <exclude name="com/kirkk/base/**"/> -->
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<!-- <pathelement path="${dist}/base.jar"/> -->
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billing.jar" basedir="${build}" includes="com/kirkk/bill/** com/kirkk/base/**"/>
		
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="custcompile" depends="billcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/billing.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/customer.jar" basedir="${build}" includes="com/kirkk/cust/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="testcompile" depends="custcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/test/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/customer.jar"/>
				<pathelement path="${dist}/billing.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/billing.jar"/>
				<pathelement path="${dist}/customer.jar"/>
				<!-- Can create a base.jar to eliminate dependency between customer.jar and billing.jar -->
				<!-- <pathelement path="${dist}/base.jar"/> -->
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="analyzer" depends="testcompile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="dist" basedir=".">

	<property name="javasrc" location="${basedir}/src/impl"/>
	<property name="testsrc" location="${basedir}/src/factorytests"/>
	<property name="build" location="${basedir}/build"/>
	<property name="bindist" location="${basedir}/bin"/>
	<property name="deploy" location="${basedir}/deploy"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/buildstats"/>
	<property name="version" value="1.0"/>
	
	<path id="project.class.path">
		<pathelement path="${javasrc}"/>
		<pathelement path="${testsrc}"/>
		<pathelement path="${lib}/junit.jar"/>
		<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
		<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
		<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
	</path>
	
	<target name="clean" description="clean up">
		<delete dir="${bindist}"/>
		<delete dir="${deploy}"/>
		<delete dir="${build}"/>
		<delete dir="${buildstats}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp/>
		<mkdir dir="${build}"/>
		<mkdir dir="${buildstats}"/>
	</target>
	
	<target name="compile" depends="init">
		<javac srcdir="${javasrc}:${testsrc}" destdir="${build}">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="dist" depends="compile">
		<mkdir dir="${bindist}"/>
		<mkdir dir="${bindist}/com/extensiblejava/facade"/>
		<mkdir dir="${bindist}/com/extensiblejava/calculator/test"/>
		<copy file="${javasrc}/com/extensiblejava/facade/AppContext.xml" todir="${bindist}/com/extensiblejava/facade"/>
		<copy file="${testsrc}/com/extensiblejava/calculator/test/TestContext.xml" todir="${build}/com/extensiblejava/calculator/test"/>
		<copy file="${basedir}/run.sh" todir="${bindist}"/>
		
		<jar jarfile="${bindist}/loan-impl-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/impl/**"/>
		<jar jarfile="${bindist}/loan-intrfc-${version}.jar" basedir="${build}" excludes="com/extensiblejava/calculator/test/** com/extensiblejava/calculator/** com/extensiblejava/loan/impl/** com/extensiblejava/applicant/** com/extensiblejava/facade/** com/extensiblejava/client/** com/extensiblejava/test/**"/>
		<!-- ><jar jarfile="${bindist}/loan-${version}.jar" basedir="${build}" includes = "com/extensiblejava/loan/** com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/> -->
		<jar jarfile="${bindist}/calc-test-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/calc-impl-${version}.jar" basedir="${build}" includes="com/extensiblejava/calculator/**" excludes="com/extensiblejava/calculator/test/**"/>
		<jar jarfile="${bindist}/loanfacade-${version}.jar" basedir="${build}" includes="com/extensiblejava/facade/**"/>
		<jar jarfile="${bindist}/client-${version}.jar" basedir="${build}" includes="com/extensiblejava/client/**"/>
		 
		<delete dir="${build}"/>
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${bindist}/loan-intrfc-${version}.jar"/>
				<pathelement path="${bindist}/loan-impl-${version}.jar"/>
				<pathelement path="${bindist}/applicant-${version}.jar"/>
				<pathelement path="${bindist}/calc-impl-${version}.jar"/>
				<pathelement path="${bindist}/calc-test-${version}.jar"/>
				<pathelement path="${lib}/org.springframework.beans-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context-3.0.0.RELEASE.jar"/> 
				<pathelement path="${lib}/org.springframework.core-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.context.support-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.asm-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.aop-3.0.0.RELEASE.jar"/>
				<pathelement path="${lib}/org.springframework.expression-3.0.0.RELEASE.jar"/>
				<pathelement location="${lib}/log4j-1.2.13.jar"/>
				<pathelement location="${lib}/commons-collections.jar"/>
				<pathelement location="${lib}/commons-logging.jar"/>
				<pathelement location="${lib}/xml-apis.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.extensiblejava.calculator.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
	</target>
	
	<target name="analyzer" depends="dist">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>
		<delete file="${bindist}/loan-test-${version}.jar"/>
        <jaranalyzer srcdir="${bindist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./buildstats/dependencies.grph -o ./buildstats/dependencies.png"/></exec>

	</target>
	
</project><project name="Comp" default="analyzer" basedir=".">

	<property name="src" location="${basedir}/src"/>
	<property name="build" location="${basedir}/build"/>
	<property name="buildsrc" location="${basedir}/buildsrc"/>
	<property name="lib" location="${basedir}/lib"/>
	<property name="buildstats" location="${basedir}/stats"/>
	<property name="dist" location="${basedir}/bin"/>
	<property name="version" value="1.0"/>
	
	<target name="clean">
		<delete dir="${build}"/>
		<delete dir="${buildsrc}"/>
		<delete dir="${buildstats}"/>
		<delete dir="${dist}"/>
		<delete file="junitresults.txt"/>
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${buildstats}"/>
		<mkdir dir="${dist}"/>
	</target>
	
	<target name="basecompile" depends="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/base.jar" basedir="${build}" includes="com/kirkk/base/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="billcompile" depends="basecompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/bill/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/bill.jar" basedir="${build}" includes="com/kirkk/bill/**"/>
		
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="custcompile" depends="billcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/cust.jar" basedir="${build}" includes="com/kirkk/cust/**"/>

		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="testcompile" depends="custcompile">
		<mkdir dir="${build}"/>
		<mkdir dir="${buildsrc}"/>
		<copy todir="${buildsrc}">
			<fileset dir="${src}">
				<include name="com/kirkk/test/**"/>
				<exclude name="com/kirkk/base/**"/>
				<exclude name="com/kirkk/cust/**"/>
				<exclude name="com/kirkk/bill/**"/>
			</fileset>
		</copy>
		
		<javac srcdir="${buildsrc}" destdir="${build}">
			<classpath>
				<pathelement path="${buildsrc}"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
		</javac>
		
		<jar jarfile="${dist}/billtest.jar" basedir="${build}" includes="com/kirkk/test/**"/>
		
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement path="${dist}/bill.jar"/>
				<pathelement path="${dist}/cust.jar"/>
				<pathelement path="${dist}/base.jar"/>
				<pathelement path="${dist}/billtest.jar"/>
				<pathelement path="${lib}/junit.jar"/>
			</classpath>
			<test name="com.kirkk.test.AllTests" outfile="junitresults">
				<formatter type="plain"/>
			</test>
		</junit>
		<delete dir="${buildsrc}"/>
		<delete dir="${build}"/>
	</target>
	
	<target name="analyzer" depends="testcompile">

        <taskdef name="jaranalyzer" classname="com.kirkk.analyzer.textui.JarAnalyzerTask">
            <classpath>
                <pathelement path="${lib}/jaranalyzer-1.2.jar"/>
                <pathelement path="${lib}/lib/bcel-5.2.jar"/>
                <pathelement path="${lib}/lib/jakarta-regexp-1.3.jar"/>
                <pathelement path="${lib}/lib"/>
            </classpath>
        </taskdef>

        <jaranalyzer srcdir="${dist}" destfile="${buildstats}/dependencies.xml" 
				summaryclass="com.kirkk.analyzer.textui.XMLUISummary" />
				
		<style in="${buildstats}/dependencies.xml" 
		       out="${buildstats}/dependencies.html"
			style="${lib}/jaranalyzer.xsl">	
		</style>

		<style in="${buildstats}/dependencies.xml" 
		    out="${buildstats}/dependencies.grph"
			style="${lib}/jaranalyzer2dot.xsl">	
		</style>

		<exec executable="dot" ><arg line="-Tpng -Nshape=box -Nfontsize=30 -Nwidth=1.5 -Nheight=1.25 ./stats/dependencies.grph -o ./stats/dependencies.png"/></exec>

	</target>
	
</project>